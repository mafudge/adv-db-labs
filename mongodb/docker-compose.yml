version: "3"
services:

  mongo:
    image: mongo:latest
    restart: always
    hostname: mongo
    ports:
      - 27017:27017
    environment:
      MONGO_INITDB_ROOT_USERNAME: admin
      MONGO_INITDB_ROOT_PASSWORD: SU2orange!

  mongo-express:
    image: mongo-express:latest
    hostname: mongo-express
    restart: always
    ports:
      - 8081:8081
    environment:
      ME_CONFIG_MONGODB_ADMINUSERNAME: admin
      ME_CONFIG_MONGODB_ADMINPASSWORD: SU2orange!
      ME_CONFIG_MONGODB_URL: mongodb://admin:SU2orange!@mongo:27017/
    depends_on: 
      - mongo
  sample-app:
    build: webapp/.
    ports:
      - 5000:5000
    depends_on: 
      - mongo
      
  mongo-client:
    image: mongoclient/mongoclient:latest
    restart: always
    hostname: mongoclient
    ports:
      - 8082:3000
    environment:
      MONGOCLIENT_DEFAULT_CONNECTION_URL: mongodb://admin:SU2orange!@mongo:27017/
    depends_on: 
      - mongo

  drill:
    image: apache/drill:1.19.0
    hostname: drill
    command: /bin/bash
    tty: true
    ports:
    - "8047:8047"
    depends_on:
    - mongo
    links:
    - mongo

  # sqlpad:
  #   image: sqlpad/sqlpad:6.7.1 #5.6
  #   environment:
  #     - "SQLPAD_ADMIN=admin@admin.org"
  #     - "SQLPAD_ADMIN_PASSWORD=SU2orange!"
  #     - "SQLPAD_AUTH_DISABLED=True"
  #     - "SQLPAD_AUTH_DISABLED_DEFAULT_ROLE=admin"
  #   links:
  #     - mongo
  #     - drill
  #   ports:
  #     - "5001:3000"
  #   volumes:
  #     - sqlpad-volume:/var/lib/sqlpad
  #   networks:
  #     mongo_net:

# volumes: 
#   sqlpad-volume: